!function(t){function e(s){if(i[s])return i[s].exports;var r=i[s]={exports:{},id:s,loaded:!1};return t[s].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");i(8),i(5),i(4),i(7),i(3),i(2),i(6),i(1),AFRAME.registerComponent("super-hands",{schema:{colliderState:{default:"collided"},colliderEvent:{default:"hit"},grabStartButtons:{default:["gripdown","trackpaddown","triggerdown","gripclose","pointup","thumbup","pointingstart","pistolstart","thumbstickdown"]},grabEndButtons:{default:["gripup","trackpadup","triggerup","gripopen","pointdown","thumbdown","pointingend","pistolend","thumbstickup"]},stretchStartButtons:{default:["gripdown","trackpaddown","triggerdown","gripclose","pointup","thumbup","pointingstart","pistolstart","thumbstickdown"]},stretchEndButtons:{default:["gripup","trackpadup","triggerup","gripopen","pointdown","thumbdown","pointingend","pistolend","thumbstickup"]},dragDropStartButtons:{default:["gripdown","trackpaddown","triggerdown","gripclose","pointup","thumbup","pointingstart","pistolstart","thumbstickdown"]},dragDropEndButtons:{default:["gripup","trackpadup","triggerup","gripopen","pointdown","thumbdown","pointingend","pistolend","thumbstickup"]}},multiple:!1,init:function(){this.HOVER_EVENT="hover-start",this.UNHOVER_EVENT="hover-end",this.GRAB_EVENT="grab-start",this.UNGRAB_EVENT="grab-end",this.STRETCH_EVENT="stretch-start",this.UNSTRETCH_EVENT="stretch-end",this.DRAG_EVENT="drag-start",this.UNDRAG_EVENT="drag-end",this.DRAGOVER_EVENT="dragover-start",this.UNDRAGOVER_EVENT="dragover-end",this.DRAGDROP_EVENT="drag-drop",this.otherSuperHand=null,this.gehDragged=new Set,this.gehClicking=new Set,this.hoverEls=[],this.state=new Map,this.grabbing=!1,this.stretching=!1,this.dragging=!1,this.unHover=this.unHover.bind(this),this.unWatch=this.unWatch.bind(this),this.onHit=this.onHit.bind(this),this.onGrabStartButton=this.onGrabStartButton.bind(this),this.onGrabEndButton=this.onGrabEndButton.bind(this),this.onStretchStartButton=this.onStretchStartButton.bind(this),this.onStretchEndButton=this.onStretchEndButton.bind(this),this.onDragDropStartButton=this.onDragDropStartButton.bind(this),this.onDragDropEndButton=this.onDragDropEndButton.bind(this),this.system.registerMe(this)},update:function(t){this.unRegisterListeners(t),this.registerListeners()},remove:function(){this.system.unregisterMe(this),this.unRegisterListeners()},pause:function(){},play:function(){},onGrabStartButton:function(t){this.grabbing=!0,this.dispatchMouseEventAll("mousedown",this.el),this.gehClicking=new Set(this.hoverEls),this.updateGrabbed()},onGrabEndButton:function(t){var e=this,i=this.hoverEls.filter(function(t){return e.gehClicking.has(t)});this.dispatchMouseEventAll("mouseup",this.el,!0);for(var s=0;s<i.length;s++)this.dispatchMouseEvent(i[s],"click",this.el);this.gehClicking.clear(),this.state.has(this.GRAB_EVENT)&&(this.state.get(this.GRAB_EVENT).emit(this.UNGRAB_EVENT,{hand:this.el}),this.promoteHoveredEl(this.state.get(this.GRAB_EVENT)),this.state.delete(this.GRAB_EVENT),this.hover()),this.grabbing=!1},onStretchStartButton:function(t){this.stretching=!0,this.updateStretched()},onStretchEndButton:function(t){var e=this.state.get(this.STRETCH_EVENT);e&&(e.emit(this.UNSTRETCH_EVENT,{hand:this.el}),this.promoteHoveredEl(e),this.state.delete(this.STRETCH_EVENT),this.hover()),this.stretching=!1},onDragDropStartButton:function(t){this.dragging=!0,this.hoverEls.length&&(this.gehDragged=new Set(this.hoverEls),this.dispatchMouseEventAll("dragstart",this.el)),this.updateDragged()},onDragDropEndButton:function(t){var e,i,s=this,r=this.state.get(this.DRAG_EVENT);this.dragging=!1,this.gehDragged.forEach(function(t){s.dispatchMouseEvent(t,"dragend",s.el),s.dispatchMouseEventAll("drop",t,!0,!0),s.dispatchMouseEventAll("dragleave",t,!0,!0)}),this.gehDragged.clear(),r&&(e={hand:this.el,dropped:r,on:null},i=this.findTarget(this.DRAGDROP_EVENT,e,!0),i&&(e.on=i,this.emitCancelable(r,this.DRAGDROP_EVENT,e),this._unHover(i)),r.emit(this.UNDRAG_EVENT,{hand:this.el}),this.promoteHoveredEl(r),this.state.delete(this.DRAG_EVENT),this.hover())},onHit:function(t){var e,i=this,s=t.detail.el;s&&(e=this.hoverEls.indexOf(s),e===-1&&(this.hoverEls.push(s),s.addEventListener("stateremoved",this.unWatch),this.dispatchMouseEvent(s,"mouseover",this.el),this.dragging&&this.gehDragged.size&&this.gehDragged.forEach(function(t){i.dispatchMouseEventAll("dragenter",t,!0,!0)}),this.updateGrabbed(),this.updateStretched(),this.updateDragged(),this.hover()))},updateGrabbed:function(){var t=this.state.get(this.GRAB_EVENT);this.grabbing&&!t&&(t=this.findTarget(this.GRAB_EVENT,{hand:this.el}),t&&(this.state.set(this.GRAB_EVENT,t),this._unHover(t)))},updateStretched:function(){var t=this.state.get(this.STRETCH_EVENT);this.stretching&&!t&&(t=this.findTarget(this.STRETCH_EVENT,{hand:this.el}),t&&(this.state.set(this.STRETCH_EVENT,t),this._unHover(t)))},updateDragged:function(){var t=this.state.get(this.DRAG_EVENT);this.dragging&&!t&&(t=this.state.get(this.GRAB_EVENT)&&!this.emitCancelable(this.state.get(this.GRAB_EVENT),this.DRAG_EVENT,{hand:this.el})?this.state.get(this.GRAB_EVENT):this.findTarget(this.DRAG_EVENT,{hand:this.el}),t&&(this.state.set(this.DRAG_EVENT,t),this._unHover(t)))},hover:function(){var t,e;this.state.has(this.HOVER_EVENT)&&this._unHover(this.state.get(this.HOVER_EVENT),!0),this.state.has(this.DRAGOVER_EVENT)&&this._unHover(this.state.get(this.DRAGOVER_EVENT),!0),this.dragging&&this.state.get(this.DRAG_EVENT)&&(t={hand:this.el,hovered:e,carried:this.state.get(this.DRAG_EVENT)},e=this.findTarget(this.DRAGOVER_EVENT,t,!0),e&&(e.addEventListener("stateremoved",this.unHover),this.emitCancelable(this.state.get(this.DRAG_EVENT),this.DRAGOVER_EVENT,t),this.state.set(this.DRAGOVER_EVENT,e))),this.state.has(this.DRAGOVER_EVENT)||(e=this.findTarget(this.HOVER_EVENT,{hand:this.el},!0),e&&(e.addEventListener("stateremoved",this.unHover),this.state.set(this.HOVER_EVENT,e)))},unHover:function(t){t.detail.state===this.data.colliderState&&this._unHover(t.target)},_unHover:function(t,e){var i;t.removeEventListener("stateremoved",this.unHover),t===this.state.get(this.DRAGOVER_EVENT)&&(this.state.delete(this.DRAGOVER_EVENT),i={hand:this.el,hovered:t,carried:this.state.get(this.DRAG_EVENT)},this.emitCancelable(t,this.UNDRAGOVER_EVENT,i),this.state.has(this.DRAG_EVENT)&&this.emitCancelable(this.state.get(this.DRAG_EVENT),this.UNDRAGOVER_EVENT,i)),t===this.state.get(this.HOVER_EVENT)&&(this.state.delete(this.HOVER_EVENT),this.emitCancelable(t,this.UNHOVER_EVENT,{hand:this.el})),e||this.hover()},unWatch:function(t){t.detail.state===this.data.colliderState&&this._unWatch(t.target)},_unWatch:function(t){var e=this,i=this.hoverEls.indexOf(t);t.removeEventListener("stateremoved",this.unWatch),i!==-1&&this.hoverEls.splice(i,1),this.gehDragged.forEach(function(i){e.dispatchMouseEvent(t,"dragleave",i),e.dispatchMouseEvent(i,"dragleave",t)}),this.dispatchMouseEvent(t,"mouseout",this.el)},registerListeners:function(){var t=this;this.el.addEventListener(this.data.colliderEvent,this.onHit),this.data.grabStartButtons.forEach(function(e){t.el.addEventListener(e,t.onGrabStartButton)}),this.data.grabEndButtons.forEach(function(e){t.el.addEventListener(e,t.onGrabEndButton)}),this.data.stretchStartButtons.forEach(function(e){t.el.addEventListener(e,t.onStretchStartButton)}),this.data.stretchEndButtons.forEach(function(e){t.el.addEventListener(e,t.onStretchEndButton)}),this.data.dragDropStartButtons.forEach(function(e){t.el.addEventListener(e,t.onDragDropStartButton)}),this.data.dragDropEndButtons.forEach(function(e){t.el.addEventListener(e,t.onDragDropEndButton)})},unRegisterListeners:function(t){var e=this;t=t||this.data,0!==Object.keys(t).length&&(this.el.removeEventListener(t.colliderEvent,this.onHit),t.grabStartButtons.forEach(function(t){e.el.removeEventListener(t,e.onGrabStartButton)}),t.grabEndButtons.forEach(function(t){e.el.removeEventListener(t,e.onGrabEndButton)}),t.stretchStartButtons.forEach(function(t){e.el.removeEventListener(t,e.onStretchStartButton)}),t.stretchEndButtons.forEach(function(t){e.el.removeEventListener(t,e.onStretchEndButton)}),t.dragDropStartButtons.forEach(function(t){e.el.removeEventListener(t,e.onDragDropStartButton)}),t.dragDropEndButtons.forEach(function(t){e.el.removeEventListener(t,e.onDragDropEndButton)}))},emitCancelable:function(t,e,i){var s,r;return i=i||{},s={bubbles:!0,cancelable:!0,detail:i},s.detail.target=s.detail.target||t,r=new window.CustomEvent(e,s),t.dispatchEvent(r)},dispatchMouseEvent:function(t,e,i){var s=new window.MouseEvent(e,{relatedTarget:i});t.dispatchEvent(s)},dispatchMouseEventAll:function(t,e,i,s){var r=this,n=this.hoverEls;if(i&&(n=n.filter(function(t){return t!==r.state.get(r.GRAB_EVENT)&&t!==r.state.get(r.DRAG_EVENT)&&t!==r.state.get(r.STRETCH_EVENT)&&!r.gehDragged.has(t)})),s)for(var h=0;h<n.length;h++)this.dispatchMouseEvent(n[h],t,e),this.dispatchMouseEvent(e,t,n[h]);else for(var a=0;a<n.length;a++)this.dispatchMouseEvent(n[a],t,e)},findTarget:function(t,e,i){var s,r=this,n=this.hoverEls;for(i&&(n=n.filter(function(t){return t!==r.state.get(r.GRAB_EVENT)&&t!==r.state.get(r.DRAG_EVENT)&&t!==r.state.get(r.STRETCH_EVENT)})),s=n.length-1;s>=0;s--)if(!this.emitCancelable(n[s],t,e))return n[s];return null},promoteHoveredEl:function(t){var e=this.hoverEls.indexOf(t);e!==-1&&(this.hoverEls.splice(e,1),this.hoverEls.push(t))}})},function(t,e){"use strict";var i=AFRAME.utils.extendDeep,s=AFRAME.primitives.getMeshMixin();AFRAME.registerPrimitive("a-locomotor",i({},s,{defaultComponents:{geometry:{primitive:"sphere",radius:100},material:{visible:!1},grabbable:{usePhysics:"never",invert:!0,suppressY:!0},stretchable:{invert:!0},"locomotor-auto-config":{}},mappings:{"fetch-camera":"locomotor-auto-config.camera","add-to-colliders":"locomotor-auto-config.collider","allow-movement":"locomotor-auto-config.move","horizontal-only":"grabbable.suppressY","allow-scaling":"locomotor-auto-config.stretch"}}))},function(t,e){"use strict";AFRAME.registerComponent("clickable",{schema:{onclick:{type:"string"}},init:function(){this.CLICKED_STATE="clicked",this.CLICK_EVENT="grab-start",this.UNCLICK_EVENT="grab-end",this.clickers=[],this.start=this.start.bind(this),this.end=this.end.bind(this),this.el.addEventListener(this.CLICK_EVENT,this.start),this.el.addEventListener(this.UNCLICK_EVENT,this.end)},remove:function(){this.el.removeEventListener(this.CLICK_EVENT,this.start),this.el.removeEventListener(this.UNCLICK_EVENT,this.end)},start:function(t){this.el.addState(this.CLICKED_STATE),this.clickers.indexOf(t.detail.hand)===-1&&(this.clickers.push(t.detail.hand),t.preventDefault&&t.preventDefault())},end:function(t){var e=this.clickers.indexOf(t.detail.hand);e!==-1&&this.clickers.splice(e,1),this.clickers.length<1&&this.el.removeState(this.CLICKED_STATE)}})},function(t,e){"use strict";AFRAME.registerComponent("drag-droppable",{init:function(){this.HOVERED_STATE="dragover",this.DRAGGED_STATE="dragged",this.HOVER_EVENT="dragover-start",this.UNHOVER_EVENT="dragover-end",this.DRAG_EVENT="drag-start",this.UNDRAG_EVENT="drag-end",this.DRAGDROP_EVENT="drag-drop",this.hoverStart=this.hoverStart.bind(this),this.dragStart=this.dragStart.bind(this),this.hoverEnd=this.hoverEnd.bind(this),this.dragEnd=this.dragEnd.bind(this),this.dragDrop=this.dragDrop.bind(this),this.el.addEventListener(this.HOVER_EVENT,this.hoverStart),this.el.addEventListener(this.DRAG_EVENT,this.dragStart),this.el.addEventListener(this.UNHOVER_EVENT,this.hoverEnd),this.el.addEventListener(this.UNDRAG_EVENT,this.dragEnd),this.el.addEventListener(this.DRAGDROP_EVENT,this.dragDrop)},remove:function(){this.el.removeEventListener(this.HOVER_EVENT,this.hoverStart),this.el.removeEventListener(this.DRAG_EVENT,this.dragStart),this.el.removeEventListener(this.UNHOVER_EVENT,this.hoverEnd),this.el.removeEventListener(this.UNDRAG_EVENT,this.dragEnd),this.el.removeEventListener(this.DRAGDROP_EVENT,this.dragDrop)},hoverStart:function(t){this.el.addState(this.HOVERED_STATE),t.preventDefault&&t.preventDefault()},dragStart:function(t){this.el.addState(this.DRAGGED_STATE),t.preventDefault&&t.preventDefault()},hoverEnd:function(t){this.el.removeState(this.HOVERED_STATE)},dragEnd:function(t){this.el.removeState(this.DRAGGED_STATE)},dragDrop:function(t){t.preventDefault&&t.preventDefault()}})},function(t,e){"use strict";AFRAME.registerComponent("grabbable",{schema:{usePhysics:{default:"ifavailable"},maxGrabbers:{type:"int",default:NaN},invert:{default:!1},suppressY:{default:!1}},init:function(){var t=this;this.GRABBED_STATE="grabbed",this.GRAB_EVENT="grab-start",this.UNGRAB_EVENT="grab-end",this.grabbed=!1,this.grabbers=[],this.constraints=new Map,this.el.addEventListener(this.GRAB_EVENT,function(e){return t.start(e)}),this.el.addEventListener(this.UNGRAB_EVENT,function(e){return t.end(e)}),this.el.addEventListener("mouseout",function(e){return t.lostGrabber(e)})},update:function(t){"never"===this.data.usePhysics&&this.constraints.size&&this.clearConstraints(),this.xFactor=this.data.invert?-1:1,this.zFactor=this.data.invert?-1:1,this.yFactor=(this.data.invert?-1:1)*!this.data.suppressY},tick:function(){if(this.grabber&&!this.constraints.size&&"only"!==this.data.usePhysics){var t=this.grabber.object3D?this.grabber.object3D.getWorldPosition():this.grabber.getAttribute("position"),e=this.previousPosition||t,i={x:t.x-e.x,y:t.y-e.y,z:t.z-e.z},s=this.el.getAttribute("position");this.previousPosition=t,this.el.setAttribute("position",{x:s.x+i.x*this.xFactor,y:s.y+i.y*this.yFactor,z:s.z+i.z*this.zFactor})}},remove:function(){this.el.removeEventListener(this.GRAB_EVENT,this.start),this.el.removeEventListener(this.UNGRAB_EVENT,this.end),this.clearConstraints()},start:function(t){var e=!Number.isFinite(this.data.maxGrabbers)||this.grabbers.length<this.data.maxGrabbers;if(this.grabbers.indexOf(t.detail.hand)===-1&&e){if(this.grabbers.push(t.detail.hand),"never"!==this.data.usePhysics&&this.el.body&&t.detail.hand.body&&!this.constraints.has(t.detail.hand)){var i=new window.CANNON.LockConstraint(this.el.body,t.detail.hand.body);this.el.body.world.addConstraint(i),this.constraints.set(t.detail.hand,i)}else this.grabber||(this.grabber=t.detail.hand,this.previousPosition=null);t.preventDefault&&t.preventDefault(),this.grabbed=!0,this.el.addState(this.GRABBED_STATE)}},end:function(t){var e=this.grabbers.indexOf(t.detail.hand),i=this.constraints.get(t.detail.hand);e!==-1&&(this.grabbers.splice(e,1),this.grabber=this.grabbers[0],this.previousPosition=null),i&&(this.el.body.world.removeConstraint(i),this.constraints.delete(t.detail.hand)),this.grabber||(this.grabbed=!1,this.el.removeState(this.GRABBED_STATE))},clearConstraints:function(){if(this.el.body){var t=!0,e=!1,i=void 0;try{for(var s,r=this.constraints.values()[Symbol.iterator]();!(t=(s=r.next()).done);t=!0){var n=s.value;this.el.body.world.removeConstraint(n)}}catch(t){e=!0,i=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw i}}}this.constraints.clear()},lostGrabber:function(t){var e=this.grabbers.indexOf(t.relatedTarget);e===-1||t.relatedTarget===this.grabber||this.constraints.has(t.relatedTarget)||this.grabbers.splice(e,1)}})},function(t,e){"use strict";AFRAME.registerComponent("hoverable",{init:function(){this.HOVERED_STATE="hovered",this.HOVER_EVENT="hover-start",this.UNHOVER_EVENT="hover-end",this.hoverers=[],this.start=this.start.bind(this),this.end=this.end.bind(this),this.el.addEventListener(this.HOVER_EVENT,this.start),this.el.addEventListener(this.UNHOVER_EVENT,this.end)},remove:function(){this.el.removeEventListener(this.HOVER_EVENT,this.start),this.el.removeEventListener(this.UNHOVER_EVENT,this.end)},start:function(t){this.el.addState(this.HOVERED_STATE),this.hoverers.indexOf(t.detail.hand)===-1&&this.hoverers.push(t.detail.hand),t.preventDefault&&t.preventDefault()},end:function(t){var e=this.hoverers.indexOf(t.detail.hand);e!==-1&&this.hoverers.splice(e,1),this.hoverers.length<1&&this.el.removeState(this.HOVERED_STATE)}})},function(t,e){"use strict";AFRAME.registerComponent("locomotor-auto-config",{schema:{camera:{default:!0},stretch:{default:!0},move:{default:!0},collider:{default:!0}},init:function(){var t=this,e=!0;this.data.stretch||this.el.removeComponent("stretchable"),this.data.move||this.el.removeComponent("grabbable"),this.data.collider&&this.el.childNodes.forEach(function(t){var e=t.getAttribute&&t.getAttribute("sphere-collider");e&&e.objects.indexOf("a-locomotor")===-1&&t.setAttribute("sphere-collider",{objects:""===e.objects?e.objects:e.objects+", a-locomotor"})}),this.data.camera&&(e=!1,this.el.sceneEl.addEventListener("camera-ready",function(e){var i=document.querySelector("[data-aframe-default-camera]");i&&!function(){var e=i.getAttribute("camera"),s=e&&e.userHeight?e.userHeight:1.6;t.el.appendChild(i),window.setTimeout(function(){i.setAttribute("camera",{userHeight:s}),t.ready()},0)}()})),e&&this.ready()},ready:function(){this.el.emit("locomotor-ready",{})}})},function(t,e){"use strict";AFRAME.registerComponent("stretchable",{schema:{usePhysics:{default:"ifavailable"},invert:{default:!1}},init:function(){this.STRETCHED_STATE="stretched",this.STRETCH_EVENT="stretch-start",this.UNSTRETCH_EVENT="stretch-end",this.stretched=!1,this.stretchers=[],this.start=this.start.bind(this),this.end=this.end.bind(this),this.el.addEventListener(this.STRETCH_EVENT,this.start),this.el.addEventListener(this.UNSTRETCH_EVENT,this.end)},update:function(t){},tick:function(){if(this.stretched){var t=(new THREE.Vector3).copy(this.el.getAttribute("scale")),e=(new THREE.Vector3).copy(this.stretchers[0].getAttribute("position")),i=(new THREE.Vector3).copy(this.stretchers[1].getAttribute("position")),s=e.distanceTo(i),r=1;if(null!==this.previousStretch&&0!==s&&(r=Math.pow(s/this.previousStretch,this.data.invert?-1:1)),this.previousStretch=s,t=t.multiplyScalar(r),this.el.setAttribute("scale",t),this.el.body&&"never"!==this.data.usePhysics){var n=this.el.body.shapes[0];n.halfExtents?(n.halfExtents.scale(r,n.halfExtents),n.updateConvexPolyhedronRepresentation()):this.shapeWarned||(console.warn("Unable to stretch physics body: unsupported shape"),this.shapeWarned=!0),this.el.body.updateBoundingRadius()}}},remove:function(){this.el.removeEventListener(this.STRETCH_EVENT,this.start),this.el.removeEventListener(this.UNSTRETCH_EVENT,this.end)},start:function(t){this.stretched||this.stretchers.includes(t.detail.hand)||(this.stretchers.push(t.detail.hand),2===this.stretchers.length&&(this.stretched=!0,this.previousStretch=null,this.el.addState(this.STRETCHED_STATE)),t.preventDefault&&t.preventDefault())},end:function(t){var e=this.stretchers.indexOf(t.detail.hand);e!==-1&&(this.stretchers.splice(e,1),this.stretched=!1,this.el.removeState(this.STRETCHED_STATE))}})},function(t,e){"use strict";AFRAME.registerSystem("super-hands",{init:function(){this.superHands=[]},registerMe:function(t){1===this.superHands.length&&(this.superHands[0].otherSuperHand=t,t.otherSuperHand=this.superHands[0]),this.superHands.push(t)},unregisterMe:function(t){var e=this.superHands.indexOf(t);e!==-1&&this.superHands.splice(e,1),this.superHands.forEach(function(e){e.otherSuperHand===t&&(e.otherSuperHand=null)})}})}]);